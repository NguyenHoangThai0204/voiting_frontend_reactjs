Chắc chắn rồi! Dưới đây là những chỗ mình đã thêm vào đoạn mã của bạn để cho phép người dùng vote khi click vào một option:

1. Import hàm createVote từ CallApi:
JavaScript

import { getVoteById, createVote } from "../../../api/CallApi"; // Giả sử bạn có hàm createVote trong CallApi
AI-generated code. Review and use carefully. More info on FAQ.
2. Thêm hàm handleVote để gửi yêu cầu POST khi người dùng click vào một option:
JavaScript

const handleVote = async (optionId: string) => {
    try {
        const userId = "66cbc96d367aa89344e6c0d9"; // Giả sử bạn có userId từ đâu đó
        const response = await createVote({
            pollId: id,
            optionId: optionId,
            userId: userId,
            timestamp: new Date().toISOString()
        });
        console.log('Vote success:', response.data);
    } catch (error) {
        console.error('Error voting:', error);
    }
}
AI-generated code. Review and use carefully. More info on FAQ.
3. Thêm sự kiện onClick vào mỗi TextField của option:
JavaScript

<TextField
    className="text_namechoice"
    variant="outlined"
    placeholder={`Choice ${index + 1}`}
    value={select.contentOption || ''}
    inputProps={{ readOnly: true }} 
    onClick={() => handleVote(select._id)} // Thêm sự kiện onClick để vote
    InputProps={{
        endAdornment: (
            <InputAdornment position="end">
                <IconButton
                    edge="end"
                    aria-label="add description"
                    onClick={() => toggleDescriptionInput(index)}
                >
                    <DescriptionIcon />
                </IconButton>
                <IconButton
                    edge="end"
                    aria-label="remove choice"
                    onClick={() => handleDeleteChoice(index)}
                >
                    <CloseIcon />
                </IconButton>
            </InputAdornment>
        )
    }}
/>
AI-generated code. Review and use carefully. More info on FAQ.
Tổng hợp lại:
Import hàm createVote từ CallApi.
Thêm hàm handleVote để gửi yêu cầu POST khi người dùng click vào một option.
Thêm sự kiện onClick vào mỗi TextField của option để gọi hàm handleVote.
Nếu bạn cần thêm hỗ trợ hoặc có câu hỏi nào khác, hãy cho mình biết nhé! 🚀😊